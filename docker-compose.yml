version: "3.8"

services:

  ros2-base:
    build:
      context: "docker/ros2"
      target: ros2-base
    init: true
    volumes:
      - "./docker/ros2/src:/ros2_ws/src"

  ros2-desktop:
    build:
      context: "docker/ros2"
      target: ros2-desktop
    init: true
    volumes:
      - "./docker/ros2/src:/ros2_ws/src"

  ros2-teensy-base:
    build:
      context: "docker/ros2"
      target: ros2-base-and-micro-ros-and-platformio
    init: true
    privileged: true
    volumes:
      - "./docker/ros2/src:/ros2_ws/src"
      - "./teensy-adapter:/micro_ros_ws/pio_project"
      - "./docker/ros2/caches/.pio-system:/micro_ros_ws/.platformio"
      - "/dev:/dev"

